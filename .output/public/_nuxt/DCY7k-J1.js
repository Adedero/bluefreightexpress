const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./CznFVVkb.js","./m_FpzeNm.js"])))=>i.map(i=>d[i]);
import{e as h,i as v,A as C,B as S,C as k,c as g,o as y,a as t,p as w,D as I,u as n,d as c,t as p}from"./gPK0ByQQ.js";import{m as P,a as T,b as V}from"./BnjfZgYi.js";const D={key:0,class:"mt-4 p-4 bg-gray-50 border rounded shadow-sm relative"},E={key:0,class:"absolute inset-0 bg-white/80 flex items-center justify-center z-10"},A=["disabled"],z=h({__name:"location-picker",props:{height:{default:"350px"}},emits:["locationPicked"],setup(B,{emit:b}){const x=b,o=v(null),m=v(!1),u=v(null),f=C("map-el"),r=v(),L=()=>{u.value&&r.value&&(r.value.removeLayer(u.value),u.value=null),o.value=null};return S(async()=>{if(!f.value)return;const i=await k(()=>import("./m_FpzeNm.js").then(a=>a.l),[],import.meta.url),e=(await k(async()=>{const{default:a}=await import("./CznFVVkb.js");return{default:a}},__vite__mapDeps([0,1]),import.meta.url)).default;delete i.Icon.Default.prototype._getIconUrl,i.Icon.Default.mergeOptions({iconRetinaUrl:V,iconUrl:T,shadowUrl:P}),r.value=i.map(f.value).setView([0,0],5),i.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{maxZoom:18,attribution:"&copy; OpenStreetMap contributors"}).addTo(r.value);const _=async(a,s)=>{m.value=!0;try{const l=await $fetch("https://nominatim.openstreetmap.org/reverse",{params:{format:"jsonv2",lat:a,lon:s}}),d=l.address||{};o.value={lat:a,lng:s,name:l.name||"",address:l.display_name||"",country:d.country||"",countryCode:d.country_code||"",state:d.state||"",city:d.city||"",town:d.town||"",village:d.village||""},x("locationPicked",o.value),u.value&&r.value&&r.value.removeLayer(u.value),u.value=i.marker([a,s]).addTo(r.value).bindPopup(l.display_name||"Selected location").openPopup()}catch(l){console.error("Error during reverse geocoding",l)}finally{m.value=!1}};new e({defaultMarkGeocode:!0}).addTo(r.value).on("markgeocode",a=>{const{lat:s,lng:l}=a.geocode.center;r.value.setView([s,l],13),_(s,l)}),r.value.on("click",a=>{const{lat:s,lng:l}=a.latlng;_(s,l)})}),(i,e)=>(y(),g("div",null,[t("div",{ref:"map-el",class:"w-full rounded-md overflow-hidden",style:I({height:i.height})},null,4),n(o)?(y(),g("div",D,[n(m)?(y(),g("div",E,e[0]||(e[0]=[t("span",{class:"text-sm text-gray-600 animate-pulse"},"Loading location...",-1)]))):w("",!0),t("p",null,[e[1]||(e[1]=t("strong",null,"Lat:",-1)),c(" "+p(n(o).lat),1)]),t("p",null,[e[2]||(e[2]=t("strong",null,"Lng:",-1)),c(" "+p(n(o).lng),1)]),t("p",null,[e[3]||(e[3]=t("strong",null,"Address:",-1)),c(" "+p(n(o).address),1)]),t("p",null,[e[4]||(e[4]=t("strong",null,"City:",-1)),c(" "+p(n(o).city||n(o).town||n(o).village),1)]),t("p",null,[e[5]||(e[5]=t("strong",null,"State:",-1)),c(" "+p(n(o).state),1)]),t("p",null,[e[6]||(e[6]=t("strong",null,"Country:",-1)),c(" "+p(n(o).country),1)]),t("button",{class:"mt-3 px-3 py-1 text-sm bg-red-500 text-white rounded hover:bg-red-600 transition",onClick:L,disabled:n(m)}," Clear Selection ",8,A)])):w("",!0)]))}});export{z as _};
