import D from"./n9CKDmsu.js";import{t as M}from"./DkbjyAM4.js";import{e as w,c as p,o as l,a as e,p as k,t as n,u as o,F as T,r as z,$ as y,f as _,a0 as C,b as i,A as O,i as j,B,C as V,q as E,j as L,z as Q,w as g,_ as R,d as b}from"./DHCjx-0A.js";import{u as h}from"./DzDQHAey.js";/* empty css        */import{_ as U}from"./DHk0mMyj.js";import G from"./Dx2c178e.js";import H from"./DHxHvE3X.js";import K from"./BlNWoK91.js";import Z from"./CR1LpaTt.js";import J from"./BbQ1oxLZ.js";import{u as W}from"./Buflh2ww.js";import{u as X}from"./DgWVhavE.js";import"./B0FFUQrO.js";import"./DlAUqK2U.js";import"./EhZzT-cq.js";import"./DSLRz9AX.js";import"./BaKD-sMk.js";import"./B_1yK0Rj.js";import"./COD-saly.js";import"./D5aLTPvq.js";import"./Ggmnc0oH.js";import"./vy0kVvtW.js";import"./C7mcikmB.js";import"./B3IQ4kuS.js";import"./CD2YCOhw.js";import"./_OmuWdfu.js";import"./CXnOME2c.js";import"./C8WNGDPJ.js";import"./DyvySO5c.js";import"./Bfv2Pax1.js";import"./CtTQk7Sc.js";import"./D9jEAXsz.js";import"./DStayiqf.js";import"./BSOk3eo_.js";import"./BBwG4OiY.js";import"./CJnPtxct.js";import"./CfhdCkwP.js";import"./nMvdbdjo.js";import"./D0gCGbm_.js";const ee={class:"border rounded-md overflow-hidden"},te={class:"flex gap-1 rubik px-4 py-2 bg-primary-500 text-white"},se={class:"font-semibold"},oe={key:0,class:"bg-white flex items-center justify-center px-4 py-4 min-w-0 w-full overflow-x-auto"},ie={key:0,class:"w-10 md:w-24 xl:w-32 h-1 bg-slate-200 relative overflow-hidden"},ne=w({__name:"order-status-indicator",props:{status:{},freightMode:{}},setup(d){const r=["processing","shipped","in transit","delivered"],c=s=>r.indexOf(s)<=r.indexOf(d.status),u=s=>r.indexOf(s)===r.indexOf(d.status);return(s,f)=>{const a=D;return l(),p("div",ee,[e("div",te,[f[0]||(f[0]=e("h3",null,"Order Status:",-1)),e("p",se,n(("toTitleCase"in s?s.toTitleCase:o(M))(s.status)),1)]),s.status!=="cancelled"?(l(),p("div",oe,[(l(),p(T,null,z(r,(t,m)=>e("div",{key:t,class:"flex items-center"},[e("div",{class:y(["rounded-full p-1.5 grid place-content-center aspect-square",c(t)?"bg-blue-500 text-white":"bg-slate-200"])},[t==="processing"?(l(),_(a,{key:0,name:"lucide:clock",size:"1.4rem"})):t==="shipped"?(l(),_(a,{key:1,name:"lucide:package-check",size:"1.4rem"})):t==="in transit"&&s.freightMode==="air"?(l(),_(a,{key:2,name:"lucide:plane",size:"1.4rem"})):t==="in transit"&&s.freightMode==="ocean"?(l(),_(a,{key:3,name:"lucide:ship",size:"1.4rem"})):t==="in transit"?(l(),_(a,{key:4,name:"lucide:truck",size:"1.4rem"})):t==="delivered"?(l(),_(a,{key:5,name:"lucide:map-pin-check",size:"1.4rem"})):k("",!0)],2),m<r.length-1?(l(),p("div",ie,[e("div",{class:y(["h-full absolute top-0 left-0 transition-all duration-300",{"bg-blue-500 w-full":c(r[m+1]),"bg-blue-500 w-1/2":u(t),"bg-slate-200 w-0":!c(r[m+1])&&!u(t)}])},null,2)])):k("",!0)])),64))])):k("",!0)])}}}),ae={class:"bg-white border rounded-md p-2"},le={class:"flex items-start gap-2"},re={class:"w-full"},de={class:"font-semibold text-primary-500"},ce={class:"text-sm text-slate-500"},ue={class:"mt-2 grid gap-2 md:w-full md:flex md:flex-wrap md:justify-between"},me={class:"w-fit rubik px-2 py-1 rounded-md bg-slate-100 text-slate-600 font-medium text-xs"},pe=w({__name:"update-item",props:{update:{},freightMode:{}},setup(d){function r(){return d.update.status==="processing"?"lucide:clock":d.update.status==="shipped"?"lucide:package-plus":d.update.status==="in transit"?c():d.update.status==="delivered"?"lucide:package-open":"lucide:map-pin-x"}function c(){return d.freightMode==="air"?"lucide:plane":d.freightMode==="ocean"?"lucide:ship":d.freightMode==="road"?"lucide:truck":"lucide:package"}function u(){return d.update.severity==="error"?{icon:"lucide:triangle-alert",color:"#f59e0b "}:d.update.severity==="success"?{icon:"lucide:circle-check-big",color:"#10b981"}:{icon:c(),color:"#3b82f6"}}return(s,f)=>{const a=D;return l(),p("div",ae,[e("div",le,[e("div",{class:"p-2 aspect-square rounded-full grid place-content-center text-white",style:C({backgroundColor:u().color})},[i(a,{name:u().icon},null,8,["name"])],4),e("div",re,[e("p",de,n(s.update.location.address),1),e("p",ce,n(s.update.comment),1),e("div",ue,[e("div",{class:y(["w-fit rubik px-2 py-1 rounded-md text-xs font-medium flex items-center gap-1",[s.update.status==="cancelled"?"bg-red-100 text-red-500":s.update.status==="delivered"?"bg-emerald-100 text-emerald-500":"bg-blue-100 text-blue-500"]])},[i(a,{name:r()},null,8,["name"]),e("span",null,n(("toTitleCase"in s?s.toTitleCase:o(M))(s.update.status)),1)],2),e("div",me,n(("useDateFormat"in s?s.useDateFormat:o(h))(s.update.timestamp,"ddd, MMM DD, YYYY | h:mm AA")),1)])])])])}}}),fe=w({__name:"map",props:{height:{default:"500px"},updates:{}},setup(d){const r=O("map-el"),c=j();return B(async()=>{if(!r.value||!globalThis.window)return;const u=[d.updates[0].location.lat,d.updates[0].location.lng],s=await V(()=>import("./m_FpzeNm.js").then(t=>t.l),[],import.meta.url);c.value=s.map(r.value).setView(u,10),s.tileLayer("https://tile.openstreetmap.org/{z}/{x}/{y}.png",{maxZoom:19,attribution:'&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'}).addTo(c.value);const f=[];d.updates.forEach(t=>{if(t.location){f.push([t.location.lat,t.location.lng]);const m=h(t.timestamp,"ddd, MMM DD, YYYY | h:mm AA");s.marker([t.location.lat,t.location.lng]).addTo(c.value).bindPopup(`
          <div style="font-weight: 500">
            <p style="font-weight: 600; ">${t.location.address}</p>
            <p style="font-size: 0.72rem;">${t.comment}</p>
            <p style="font-size: 0.72rem">${m.value}</p>
          </div>
        `)}});const a=s.polyline(f,{color:"red",smoothFactor:.6}).addTo(c.value);c.value.fitBounds(a.getBounds())}),(u,s)=>(l(),p("div",{ref:"map-el",class:"w-full",style:C({height:u.height})},null,4))}}),ge={key:0},_e={class:"pt-20 pb-8 px-4 lg:px-8 bg-surface"},xe={class:"flex items-center gap-1 text-primary-500"},be={class:"mt-3 grid items-start gap-x-2 gap-y-4 lg:grid-cols-2"},he={class:"grid gap-1"},ve={class:"flex gap-1 items-center"},ke={class:"font-semibold rubik"},ye={class:"flex gap-1 items-center"},we={class:"font-semibold rubik"},De={class:"flex gap-1 items-center"},$e={class:"font-semibold rubik"},Me={class:""},Te={class:"font-semibold rubik"},ze={class:"flex items-center gap-1"},Ce={class:"text-sm"},Fe={class:"font-semibold"},Ye={class:"font-semibold"},Pe={class:"flex items-center gap-1"},Se={class:"overflow-x-auto"},Ae={class:"mt-2"},Ne={class:"flex items-center gap-2 text-sm pl-2"},qe={class:"font-bold"},Ie={class:"bg-white pb-20 lg:py-10 lg:px-8 grid gap-x-2 gap-y-10 lg:grid-cols-5 items-start"},Oe={key:0,class:"bg-surface lg:bg-white lg:rounded-md lg:col-span-2 px-3 py-4 lg:p-0 grid gap-3"},je={class:"grid grid-cols-[repeat(auto-fit,minmax(180px,1fr))] gap-3"},Be={class:"border rounded-md bg-white p-2 flex flex-col"},Ve={class:"flex items-center gap-2"},Ee={class:"bg-blue-100 text-blue-500 p-2 aspect-square rounded-full grid place-content-center"},Le={class:"mt-2 rubik flex flex-col justify-between flex-grow"},Qe={class:"font-medium"},Re={class:"text-3xl"},Ue={class:"text-right text-xs text-slate-500"},Ge={class:"border rounded-md bg-white p-2 flex flex-col"},He={class:"flex items-center gap-2"},Ke={class:"bg-amber-100 text-amber-500 p-2 aspect-square rounded-full grid place-content-center"},Ze={class:"mt-2 rubik flex flex-col justify-between flex-grow"},Je={class:"font-medium"},We={class:"text-3xl"},Xe={class:"text-right text-xs text-slate-500"},et={class:"border rounded-md bg-white p-2 flex flex-col"},tt={class:"flex items-center gap-2"},st={class:"bg-emerald-100 text-emerald-500 p-2 aspect-square rounded-full grid place-content-center"},ot={class:"mt-2 rubik flex flex-col justify-between flex-grow"},it={class:"font-medium"},nt={class:"text-3xl"},at={class:"mt-5 border rounded-md overflow-hidden"},lt={key:0},rt={key:1},dt={class:"p-4 grid place-content-center gap-4"},ct={class:"flex flex-col items-center justify-center text-slate-400"},ut={key:1},mt={class:"pt-20 pb-8 px-4 lg:px-8 bg-surface"},pt={class:"flex items-center gap-1 text-primary-500"},ft={class:"mt-3 flex items-center justify-between gap-x-4 flex-wrap"},gt={class:"flex gap-2 items-center"},_t={class:"font-semibold text-lg rubik"},os=w({__name:"index",async setup(d){let r,c;const{trackingNumber:u}=E().params;W({title:(u==null?void 0:u.toString())||"Tracking"});const{data:s}=([r,c]=L(()=>X(`/api/orders/track/${u}`,"$yDQu1K0QkG")),r=await r,c(),r),f=Q(()=>s.value?s.value.trackingUpdates.sort((a,t)=>new Date(t.timestamp).getTime()-new Date(a.timestamp).getTime()):[]);return(a,t)=>{const m=D,F=ne,Y=J,$=Z,v=K,P=H,S=G,A=pe,N=fe,q=U,I=R;return l(),p("div",null,[i(I,{name:"main-default"},{default:g(()=>[o(s)?(l(),p("div",ge,[e("div",_e,[e("div",xe,[i(m,{name:"lucide:package-search",size:"1.6rem"}),t[0]||(t[0]=e("h4",{class:"rubik text-3xl font-bold"},"Shipment Tracking",-1))]),e("div",be,[e("div",he,[e("div",ve,[t[1]||(t[1]=e("div",{class:"w-1.5 aspect-square bg-slate-500 rounded-full"},null,-1)),t[2]||(t[2]=e("span",{class:"text-slate-500"},"Shipping Date: ",-1)),e("span",ke,n(("useDateFormat"in a?a.useDateFormat:o(h))(o(s).createdAt,"MMM DD, YYYY")),1)]),e("div",ye,[t[3]||(t[3]=e("div",{class:"w-1.5 aspect-square bg-slate-500 rounded-full"},null,-1)),t[4]||(t[4]=e("span",{class:"text-slate-500"},"Tracking Number: ",-1)),e("span",we,n(o(s).trackingNumber),1)]),e("div",De,[t[5]||(t[5]=e("div",{class:"w-1.5 aspect-square bg-slate-500 rounded-full"},null,-1)),t[6]||(t[6]=e("span",{class:"text-slate-500"},"Order ID: ",-1)),e("span",$e,n(o(s).orderId),1)]),e("div",Me,[t[7]||(t[7]=e("span",{class:"text-slate-500"},"Delivery Address: ",-1)),e("span",Te,n(o(s).destination.address),1)])]),e("div",null,[i(F,{status:o(s).status,"freight-mode":o(s).freightMode},null,8,["status","freight-mode"]),i(S,{header:"More",toggleable:"",collapsed:"",class:"rounded-md mt-1 font-rubik font-normal"},{default:g(()=>[i($,null,{legend:g(()=>[e("div",ze,[i(m,{name:"lucide:circle-user-round",size:"1.2rem"}),t[8]||(t[8]=e("span",{class:"font-bold"},"Client",-1))])]),default:g(()=>[e("div",Ce,[e("div",null,[t[9]||(t[9]=e("span",null,"Name: ",-1)),t[10]||(t[10]=b()),e("span",Fe,n(o(s).user.name),1)]),i(Y,{class:"my-2"}),e("div",null,[t[11]||(t[11]=e("span",null,"Email: ",-1)),t[12]||(t[12]=b()),e("span",Ye,n(o(s).user.email),1)])])]),_:1}),i($,null,{legend:g(()=>[e("div",Pe,[i(m,{name:"lucide:package",size:"1.2rem"}),t[13]||(t[13]=e("span",{class:"font-bold"},"Items",-1))])]),default:g(()=>[e("div",Se,[i(P,{value:o(s).items,size:"small",class:"text-sm","striped-rows":""},{default:g(()=>[i(v,{field:"name",header:"Name"}),i(v,{field:"unitPrice",header:"Price ($)"}),i(v,{field:"quantity",header:"Quantity"}),i(v,{header:"Amount ($)"},{body:g(({data:x})=>[b(n(x.unitPrice*x.quantity),1)]),_:1})]),_:1},8,["value"])]),e("div",Ae,[e("div",Ne,[t[14]||(t[14]=e("span",null,"Total:",-1)),e("span",qe,"$"+n(o(s).totalPrice),1)])])]),_:1})]),_:1})])])]),e("div",Ie,[o(f).length>0?(l(),p("div",Oe,[(l(!0),p(T,null,z(o(f),x=>(l(),_(A,{update:x,"freight-mode":o(s).freightMode,key:x._id},null,8,["update","freight-mode"]))),128))])):k("",!0),e("div",{class:y(["px-3",o(f).length>0?"lg:col-span-3":"lg:col-span-5"])},[e("header",je,[e("div",Be,[e("div",Ve,[e("div",Ee,[i(m,{name:"lucide:map-pin-check"})]),t[15]||(t[15]=e("p",{class:"rubik font-medium text-slate-600 text-sm"},"Destination",-1))]),e("div",Le,[e("p",Qe,[e("span",Re,n(o(s).destination.city),1)]),e("p",Ue,n(o(s).destination.state)+", "+n(o(s).destination.country),1)])]),e("div",Ge,[e("div",He,[e("div",Ke,[i(m,{name:"lucide:calendar-arrow-down"})]),t[16]||(t[16]=e("p",{class:"rubik font-medium text-slate-600 text-sm"},"Est. Arrival Date",-1))]),e("div",Ze,[e("p",Je,[e("span",We,n(("useDateFormat"in a?a.useDateFormat:o(h))(o(s).estimatedDelivery,"MMM DD")),1)]),e("p",Xe,n(("useDateFormat"in a?a.useDateFormat:o(h))(o(s).estimatedDelivery,"dddd | YYYY")),1)])]),e("div",et,[e("div",tt,[e("div",st,[i(m,{name:"lucide:circle-dollar-sign"})]),t[17]||(t[17]=e("p",{class:"rubik font-medium text-slate-600 text-sm"},"Total Value",-1))]),e("div",ot,[e("p",it,[t[18]||(t[18]=e("span",null,"$",-1)),e("span",nt,n(Math.floor(o(s).totalPrice)),1),e("span",null,"."+n((o(s).totalPrice%1).toFixed(2).slice(2)),1)]),t[19]||(t[19]=e("p",{class:"text-right text-xs text-slate-500"},"No updates",-1))])])]),e("div",at,[o(f).length>0?(l(),p("div",lt,[i(N,{updates:o(f)},null,8,["updates"])])):(l(),p("div",rt,[e("div",dt,[e("div",ct,[i(m,{name:"lucide:package-open",size:"6rem"}),t[20]||(t[20]=e("p",{class:"font-rubik font-semibold text-slate-400 text-2xl"},"No updates",-1))]),t[21]||(t[21]=e("p",{class:"text-center text-slate-500"},[b("Your order is still being processed. "),e("br"),b(" Check back later for updates.")],-1))])]))])],2)])])):(l(),p("div",ut,[e("div",mt,[e("div",pt,[i(m,{name:"lucide:package-search",size:"1.6rem"}),t[22]||(t[22]=e("h4",{class:"rubik text-3xl font-bold"},"Shipment Tracking",-1))]),e("div",ft,[e("p",gt,[t[23]||(t[23]=e("span",null,"Tracking Number: ",-1)),e("span",_t,n(o(u)),1)]),t[24]||(t[24]=e("p",{class:"flex gap-2 items-center"},[e("span",null,"Status: "),e("span",{class:"font-semibold text-lg rubik"},"Not Found")],-1))])]),e("div",null,[i(q)])]))]),_:1})])}}});export{os as default};
