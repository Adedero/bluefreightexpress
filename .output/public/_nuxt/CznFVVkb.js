import{a as o}from"./m_FpzeNm.js";var M=Object.defineProperty,j=(a,e,n)=>e in a?M(a,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):a[e]=n,p=(a,e,n)=>j(a,typeof e!="symbol"?e+"":e,n);function h(a,e){return o.Util.extend(e,a.geocodingQueryParams)}function u(a,e){return o.Util.extend(e,a.reverseQueryParams)}const N=/[&<>"'`]/g,A=/[&<>"'`]/,q={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"};function G(a){return q[a]}function W(a){return a==null?"":a?(a=""+a,A.test(a)?a.replace(N,G):a):a+""}function d(a,e){const n={Accept:"application/json"},t=new URL(a);return Object.entries(e).forEach(([s,i])=>{(Array.isArray(i)?i:[i]).forEach(r=>{t.searchParams.append(s,r)})}),fetch(t.toString(),{headers:n}).then(s=>s.json())}function I(a,e){return a.replace(/\{ *([\w_]+) *\}/g,(n,t)=>{let s=e[t];return s===void 0?s="":typeof s=="function"&&(s=s(e)),W(s)})}class b{constructor(e){p(this,"options",{serviceUrl:"https://geocode.arcgis.com/arcgis/rest/services/World/GeocodeServer",apiKey:""}),o.Util.setOptions(this,e)}async geocode(e){const n=h(this.options,{token:this.options.apiKey,SingleLine:e,outFields:"Addr_Type",forStorage:!1,maxLocations:10,f:"json"}),t=await d(this.options.serviceUrl+"/findAddressCandidates",n),s=[];if(t.candidates&&t.candidates.length)for(let i=0;i<=t.candidates.length-1;i++){const r=t.candidates[i],l=o.latLng(r.location.y,r.location.x),c=o.latLngBounds(o.latLng(r.extent.ymax,r.extent.xmax),o.latLng(r.extent.ymin,r.extent.xmin));s[i]={name:r.address,bbox:c,center:l}}return s}suggest(e){return this.geocode(e)}async reverse(e,n){const t=u(this.options,{location:e.lng+","+e.lat,distance:100,f:"json"}),s=await d(this.options.serviceUrl+"/reverseGeocode",t),i=[];if(s&&!s.error){const r=o.latLng(s.location.y,s.location.x),l=o.latLngBounds(r,r);i.push({name:s.address.Match_addr,center:r,bbox:l})}return i}}function z(a){return new b(a)}class L{constructor(e){p(this,"options",{serviceUrl:"https://dev.virtualearth.net/REST/v1/Locations/"}),o.Util.setOptions(this,e)}async geocode(e){const n=h(this.options,{query:e,key:this.options.apiKey}),t=await d(this.options.serviceUrl,n),s=[];if(t.resourceSets.length>0)for(let i=t.resourceSets[0].resources.length-1;i>=0;i--){const r=t.resourceSets[0].resources[i],l=r.bbox;s[i]={name:r.name,bbox:o.latLngBounds([l[0],l[1]],[l[2],l[3]]),center:o.latLng(r.point.coordinates)}}return s}async reverse(e,n){const t=u(this.options,{key:this.options.apiKey}),s=await d(this.options.serviceUrl+e.lat+","+e.lng,t),i=[];for(let r=s.resourceSets[0].resources.length-1;r>=0;r--){const l=s.resourceSets[0].resources[r],c=l.bbox;i[r]={name:l.name,bbox:o.latLngBounds([c[0],c[1]],[c[2],c[3]]),center:o.latLng(l.point.coordinates)}}return i}}function H(a){return new L(a)}class w{constructor(e){if(p(this,"options",{apiKey:"",serviceUrl:"https://atlas.microsoft.com/search"}),o.Util.setOptions(this,e),!this.options.apiKey)throw new Error("Azure Maps Geocoder requires an API key.")}async geocode(e){const n={"api-version":"1.0",query:e,"subscription-key":this.options.apiKey},t=this.options.serviceUrl+"/address/json",s=await d(t,n),i=[];if(s.results&&s.results.length>0)for(const r of s.results)i.push({name:r.address.freeformAddress,bbox:o.latLngBounds([r.viewport.topLeftPoint.lat,r.viewport.topLeftPoint.lon],[r.viewport.btmRightPoint.lat,r.viewport.btmRightPoint.lon]),center:o.latLng(r.position.lat,r.position.lon)});return i}async reverse(e,n){const t={"api-version":"1.0",query:e.lat+","+e.lng,"subscription-key":this.options.apiKey},s=this.options.serviceUrl+"/address/reverse/json",i=await d(s,t),r=[];if(i.addresses&&i.addresses.length>0)for(const l of i.addresses)r.push({name:l.address.freeformAddress,bbox:o.latLngBounds([l.viewport.topLeftPoint.lat,l.viewport.topLeftPoint.lon],[l.viewport.btmRightPoint.lat,l.viewport.btmRightPoint.lon]),center:o.latLng(e.lat,e.lng)});return r}}function J(a){return new w(a)}class x{constructor(e){p(this,"options",{serviceUrl:"https://maps.googleapis.com/maps/api/geocode/json"}),o.Util.setOptions(this,e)}async geocode(e){const n=h(this.options,{key:this.options.apiKey,address:e}),t=await d(this.options.serviceUrl,n),s=[];if(t.results&&t.results.length)for(let i=0;i<=t.results.length-1;i++){const r=t.results[i],l=o.latLng(r.geometry.location),c=o.latLngBounds(o.latLng(r.geometry.viewport.northeast),o.latLng(r.geometry.viewport.southwest));s[i]={name:r.formatted_address,bbox:c,center:l,properties:r.address_components}}return s}async reverse(e,n){const t=u(this.options,{key:this.options.apiKey,latlng:e.lat+","+e.lng}),s=await d(this.options.serviceUrl,t),i=[];if(s.results&&s.results.length)for(let r=0;r<=s.results.length-1;r++){const l=s.results[r],c=o.latLng(l.geometry.location),m=o.latLngBounds(o.latLng(l.geometry.viewport.northeast),o.latLng(l.geometry.viewport.southwest));i[r]={name:l.formatted_address,bbox:m,center:c,properties:l.address_components}}return i}}function V(a){return new x(a)}class U{constructor(e){if(p(this,"options",{serviceUrl:"https://geocoder.api.here.com/6.2/",app_id:"",app_code:"",apiKey:"",maxResults:5}),o.Util.setOptions(this,e),e!=null&&e.apiKey)throw Error("apiKey is not supported, use app_id/app_code instead!")}geocode(e){const n=h(this.options,{searchtext:e,gen:9,app_id:this.options.app_id,app_code:this.options.app_code,jsonattributes:1,maxresults:this.options.maxResults});return this.getJSON(this.options.serviceUrl+"geocode.json",n)}reverse(e,n){let t=e.lat+","+e.lng;this.options.reverseGeocodeProxRadius&&(t+=","+this.options.reverseGeocodeProxRadius);const s=u(this.options,{prox:t,mode:"retrieveAddresses",app_id:this.options.app_id,app_code:this.options.app_code,gen:9,jsonattributes:1,maxresults:this.options.maxResults});return this.getJSON(this.options.serviceUrl+"reversegeocode.json",s)}async getJSON(e,n){const t=await d(e,n),s=[];if(t.response.view&&t.response.view.length)for(let i=0;i<=t.response.view[0].result.length-1;i++){const r=t.response.view[0].result[i].location,l=o.latLng(r.displayPosition.latitude,r.displayPosition.longitude),c=o.latLngBounds(o.latLng(r.mapView.topLeft.latitude,r.mapView.topLeft.longitude),o.latLng(r.mapView.bottomRight.latitude,r.mapView.bottomRight.longitude));s[i]={name:r.address.label,properties:r.address,bbox:c,center:l}}return s}}class C{constructor(e){p(this,"options",{serviceUrl:"https://geocode.search.hereapi.com/v1",apiKey:"",app_id:"",app_code:"",maxResults:10}),o.Util.setOptions(this,e)}geocode(e){const n=h(this.options,{q:e,apiKey:this.options.apiKey,limit:this.options.maxResults});if(!n.at&&!n.in)throw Error("at / in parameters not found. Please define coordinates (at=latitude,longitude) or other (in) in your geocodingQueryParams.");return this.getJSON(this.options.serviceUrl+"/discover",n)}reverse(e,n){const t=u(this.options,{at:e.lat+","+e.lng,limit:this.options.reverseGeocodeProxRadius,apiKey:this.options.apiKey});return this.getJSON(this.options.serviceUrl+"/revgeocode",t)}async getJSON(e,n){const t=await d(e,n),s=[];if(t.items&&t.items.length)for(let i=0;i<=t.items.length-1;i++){const r=t.items[i],l=o.latLng(r.position.lat,r.position.lng);let c;r.mapView?c=o.latLngBounds(o.latLng(r.mapView.south,r.mapView.west),o.latLng(r.mapView.north,r.mapView.east)):c=o.latLngBounds(o.latLng(r.position.lat,r.position.lng),o.latLng(r.position.lat,r.position.lng)),s[i]={name:r.address.label,properties:r.address,bbox:c,center:l}}return s}}function $(a){return a!=null&&a.apiKey?new C(a):new U(a)}function R(a){let e;if(e=a.match(/^([NS])\s*(\d{1,3}(?:\.\d*)?)\W*([EW])\s*(\d{1,3}(?:\.\d*)?)$/))return o.latLng((/N/i.test(e[1])?1:-1)*+e[2],(/E/i.test(e[3])?1:-1)*+e[4]);if(e=a.match(/^(\d{1,3}(?:\.\d*)?)\s*([NS])\W*(\d{1,3}(?:\.\d*)?)\s*([EW])$/))return o.latLng((/N/i.test(e[2])?1:-1)*+e[1],(/E/i.test(e[4])?1:-1)*+e[3]);if(e=a.match(/^([NS])\s*(\d{1,3})°?\s*(\d{1,3}(?:\.\d*)?)?['′]?\W*([EW])\s*(\d{1,3})°?\s*(\d{1,3}(?:\.\d*)?)?['′]?$/))return o.latLng((/N/i.test(e[1])?1:-1)*(+e[2]+ +e[3]/60),(/E/i.test(e[4])?1:-1)*(+e[5]+ +e[6]/60));if(e=a.match(/^(\d{1,3})°?\s*(\d{1,3}(?:\.\d*)?)?['′]?\s*([NS])\W*(\d{1,3})°?\s*(\d{1,3}(?:\.\d*)?)?['′]?\s*([EW])$/))return o.latLng((/N/i.test(e[3])?1:-1)*(+e[1]+ +e[2]/60),(/E/i.test(e[6])?1:-1)*(+e[4]+ +e[5]/60));if(e=a.match(/^([NS])\s*(\d{1,3})°?\s*(\d{1,2})['′]?\s*(\d{1,3}(?:\.\d*)?)?["″]?\W*([EW])\s*(\d{1,3})°?\s*(\d{1,2})['′]?\s*(\d{1,3}(?:\.\d*)?)?["″]?$/))return o.latLng((/N/i.test(e[1])?1:-1)*(+e[2]+ +e[3]/60+ +e[4]/3600),(/E/i.test(e[5])?1:-1)*(+e[6]+ +e[7]/60+ +e[8]/3600));if(e=a.match(/^(\d{1,3})°?\s*(\d{1,2})['′]?\s*(\d{1,3}(?:\.\d*)?)?["″]\s*([NS])\W*(\d{1,3})°?\s*(\d{1,2})['′]?\s*(\d{1,3}(?:\.\d*)?)?["″]?\s*([EW])$/))return o.latLng((/N/i.test(e[4])?1:-1)*(+e[1]+ +e[2]/60+ +e[3]/3600),(/E/i.test(e[8])?1:-1)*(+e[5]+ +e[6]/60+ +e[7]/3600));if(e=a.match(/^\s*([+-]?\d+(?:\.\d*)?)\s*[\s,]\s*([+-]?\d+(?:\.\d*)?)\s*$/))return o.latLng(+e[1],+e[2])}class E{constructor(e){p(this,"options",{next:void 0,sizeInMeters:1e4}),o.Util.setOptions(this,e)}async geocode(e){const n=R(e);return n?[{name:e,center:n,bbox:n.toBounds(this.options.sizeInMeters)}]:this.options.next?this.options.next.geocode(e):[]}}function F(a){return new E(a)}class k{constructor(e){p(this,"options",{serviceUrl:"https://api.mapbox.com/geocoding/v5/mapbox.places/"}),o.Util.setOptions(this,e)}_getProperties(e){const n={text:e.text,address:e.address};for(let t=0;t<(e.context||[]).length;t++){const s=e.context[t].id.split(".")[0];n[s]=e.context[t].text,e.context[t].short_code&&(n.countryShortCode=e.context[t].short_code)}return n}async geocode(e){const n=this.options.serviceUrl+encodeURIComponent(e)+".json",t=h(this.options,{access_token:this.options.apiKey});t.proximity!==void 0&&t.proximity.lat!==void 0&&t.proximity.lng!==void 0&&(t.proximity=t.proximity.lng+","+t.proximity.lat);const s=await d(n,t);return this._parseResults(s)}suggest(e){return this.geocode(e)}async reverse(e,n){const t=this.options.serviceUrl+e.lng+","+e.lat+".json",s=u(this.options,{access_token:this.options.apiKey}),i=await d(t,s);return this._parseResults(i)}_parseResults(e){var n;if(!((n=e.features)!=null&&n.length))return[];const t=[];for(let s=0;s<=e.features.length-1;s++){const i=e.features[s],r=o.latLng(i.center.reverse());let l;i.bbox?l=o.latLngBounds(o.latLng(i.bbox.slice(0,2).reverse()),o.latLng(i.bbox.slice(2,4).reverse())):l=o.latLngBounds(r,r),t[s]={name:i.place_name,bbox:l,center:r,properties:this._getProperties(i)}}return t}}function Q(a){return new k(a)}class D{constructor(e){p(this,"options",{serviceUrl:"https://www.mapquestapi.com/geocoding/v1"}),o.Util.setOptions(this,e),this.options.apiKey=decodeURIComponent(this.options.apiKey)}_formatName(...e){return e.filter(n=>!!n).join(", ")}async geocode(e){const n=h(this.options,{key:this.options.apiKey,location:e,limit:5,outFormat:"json"}),t=await d(this.options.serviceUrl+"/address",n);return this._parseResults(t)}async reverse(e,n){const t=u(this.options,{key:this.options.apiKey,location:e.lat+","+e.lng,outputFormat:"json"}),s=await d(this.options.serviceUrl+"/reverse",t);return this._parseResults(s)}_parseResults(e){const n=[];if(e.results&&e.results[0].locations)for(let t=e.results[0].locations.length-1;t>=0;t--){const s=e.results[0].locations[t],i=o.latLng(s.latLng);n[t]={name:this._formatName(s.street,s.adminArea4,s.adminArea3,s.adminArea1),bbox:o.latLngBounds(i,i),center:i}}return n}}function X(a){return new D(a)}class B{constructor(e){p(this,"options",{userId:"",apiKey:"",serviceUrl:"https://neutrinoapi.com/"}),o.Util.setOptions(this,e)}async geocode(e){const n=h(this.options,{apiKey:this.options.apiKey,userId:this.options.userId,address:e.split(/\s+/).join(".")}),t=await d(this.options.serviceUrl+"geocode-address",n),s=[];if(t.locations){t.geometry=t.locations[0];const i=o.latLng(t.geometry.latitude,t.geometry.longitude),r=o.latLngBounds(i,i);s[0]={name:t.geometry.address,bbox:r,center:i}}return s}suggest(e){return this.geocode(e)}async reverse(e,n){const t=u(this.options,{apiKey:this.options.apiKey,userId:this.options.userId,latitude:e.lat,longitude:e.lng}),s=await d(this.options.serviceUrl+"geocode-reverse",t),i=[];if(s.status.status==200&&s.found){const r=o.latLng(e.lat,e.lng),l=o.latLngBounds(r,r);i[0]={name:s.address,bbox:l,center:r}}return i}}function Y(a){return new B(a)}class v{constructor(e){p(this,"options",{serviceUrl:"https://nominatim.openstreetmap.org/",htmlTemplate(n){const t=n.address;let s;const i=[];return(t.road||t.building)&&i.push("{building} {road} {house_number}"),(t.city||t.town||t.village||t.hamlet)&&(s=i.length>0?"leaflet-control-geocoder-address-detail":"",i.push('<span class="'+s+'">{postcode} {city} {town} {village} {hamlet}</span>')),(t.state||t.country)&&(s=i.length>0?"leaflet-control-geocoder-address-context":"",i.push('<span class="'+s+'">{state} {country}</span>')),I(i.join("<br/>"),t)}}),o.Util.setOptions(this,e||{})}async geocode(e){const n=h(this.options,{q:e,limit:5,format:"json",addressdetails:1}),t=await d(this.options.serviceUrl+"search",n),s=[];for(let i=t.length-1;i>=0;i--){const r=t[i].boundingbox;s[i]={icon:t[i].icon,name:t[i].display_name,html:this.options.htmlTemplate?this.options.htmlTemplate(t[i]):void 0,bbox:o.latLngBounds([+r[0],+r[2]],[+r[1],+r[3]]),center:o.latLng(+t[i].lat,+t[i].lon),properties:t[i]}}return s}async reverse(e,n){const t=u(this.options,{lat:e.lat,lon:e.lng,zoom:Math.round(Math.log(n/256)/Math.log(2)),addressdetails:1,format:"json"}),s=await d(this.options.serviceUrl+"reverse",t),i=[];if(s&&s.lat&&s.lon){const r=o.latLng(+s.lat,+s.lon),l=o.latLngBounds(r,r);i.push({name:s.display_name,html:this.options.htmlTemplate?this.options.htmlTemplate(s):void 0,center:r,bbox:l,properties:s})}return i}}function Z(a){return new v(a)}class K{constructor(e){p(this,"options",{}),o.Util.setOptions(this,e)}async geocode(e){try{const n=this.options.OpenLocationCode.decode(e);return[{name:e,center:o.latLng(n.latitudeCenter,n.longitudeCenter),bbox:o.latLngBounds(o.latLng(n.latitudeLo,n.longitudeLo),o.latLng(n.latitudeHi,n.longitudeHi))}]}catch(n){return console.warn(n),[]}}async reverse(e,n){try{return[{name:this.options.OpenLocationCode.encode(e.lat,e.lng,this.options.codeLength),center:o.latLng(e.lat,e.lng),bbox:o.latLngBounds(o.latLng(e.lat,e.lng),o.latLng(e.lat,e.lng))}]}catch(t){return console.warn(t),[]}}}function ee(a){return new K(a)}class S{constructor(e){p(this,"options",{serviceUrl:"https://api.opencagedata.com/geocode/v1/json"}),o.Util.setOptions(this,e)}async geocode(e){const n=h(this.options,{key:this.options.apiKey,q:e}),t=await d(this.options.serviceUrl,n);return this._parseResults(t)}suggest(e){return this.geocode(e)}async reverse(e,n){const t=u(this.options,{key:this.options.apiKey,q:[e.lat,e.lng].join(",")}),s=await d(this.options.serviceUrl,t);return this._parseResults(s)}_parseResults(e){const n=[];if(e.results&&e.results.length)for(let t=0;t<e.results.length;t++){const s=e.results[t],i=o.latLng(s.geometry);let r;s.annotations&&s.annotations.bounds?r=o.latLngBounds(o.latLng(s.annotations.bounds.northeast),o.latLng(s.annotations.bounds.southwest)):r=o.latLngBounds(i,i),n.push({name:s.formatted,bbox:r,center:i})}return n}}function te(a){return new S(a)}class g{constructor(e){p(this,"options",{serviceUrl:"https://api.geocode.earth/v1"}),o.Util.setOptions(this,e)}async geocode(e){const n=h(this.options,{api_key:this.options.apiKey,text:e}),t=await d(this.options.serviceUrl+"/search",n);return this._parseResults(t,"bbox")}async suggest(e){const n=h(this.options,{api_key:this.options.apiKey,text:e}),t=await d(this.options.serviceUrl+"/autocomplete",n);return this._parseResults(t,"bbox")}async reverse(e,n){const t=u(this.options,{api_key:this.options.apiKey,"point.lat":e.lat,"point.lon":e.lng}),s=await d(this.options.serviceUrl+"/reverse",t);return this._parseResults(s,"bounds")}_parseResults(e,n){const t=[];return o.geoJSON(e,{pointToLayer(s,i){return o.circleMarker(i)},onEachFeature(s,i){const r={};let l,c;i.getBounds?(l=i.getBounds(),c=l.getCenter()):i.feature.bbox?(c=i.getLatLng(),l=o.latLngBounds(o.GeoJSON.coordsToLatLng(i.feature.bbox.slice(0,2)),o.GeoJSON.coordsToLatLng(i.feature.bbox.slice(2,4)))):(c=i.getLatLng(),l=o.latLngBounds(c,c)),r.name=i.feature.properties.label,r.center=c,r[n]=l,r.properties=i.feature.properties,t.push(r)}}),t}}function f(a){return new g(a)}const oe=g,se=f,ne=g,ie=f;class O extends g{constructor(e){super(o.Util.extend({serviceUrl:"https://api.openrouteservice.org/geocode"},e))}}function re(a){return new O(a)}class P{constructor(e){p(this,"options",{serviceUrl:"https://photon.komoot.io/api/",reverseUrl:"https://photon.komoot.io/reverse/",nameProperties:["name","street","suburb","hamlet","town","city","state","country"]}),o.Util.setOptions(this,e)}async geocode(e){const n=h(this.options,{q:e}),t=await d(this.options.serviceUrl,n);return this._parseResults(t)}suggest(e){return this.geocode(e)}async reverse(e,n){const t=u(this.options,{lat:e.lat,lon:e.lng}),s=await d(this.options.reverseUrl,t);return this._parseResults(s)}_parseResults(e){var n;const t=[];if(e&&e.features)for(let s=0;s<e.features.length;s++){const i=e.features[s],r=i.geometry.coordinates,l=o.latLng(r[1],r[0]),c=(n=i.properties)==null?void 0:n.extent,m=c?o.latLngBounds([c[1],c[0]],[c[3],c[2]]):o.latLngBounds(l,l);t.push({name:this._decodeFeatureName(i),html:this.options.htmlTemplate?this.options.htmlTemplate(i):void 0,center:l,bbox:m,properties:i.properties})}return t}_decodeFeatureName(e){return(this.options.nameProperties||[]).map(n=>{var t;return(t=e.properties)==null?void 0:t[n]}).filter(n=>!!n).join(", ")}}function ae(a){return new P(a)}class T{constructor(e){p(this,"options",{serviceUrl:"https://api.what3words.com/v2/"}),o.Util.setOptions(this,e)}async geocode(e){const n=await d(this.options.serviceUrl+"forward",h(this.options,{key:this.options.apiKey,addr:e.split(/\s+/).join(".")})),t=[];if(n.geometry){const s=o.latLng(n.geometry.lat,n.geometry.lng),i=o.latLngBounds(s,s);t[0]={name:n.words,bbox:i,center:s}}return t}suggest(e){return this.geocode(e)}async reverse(e,n){const t=await d(this.options.serviceUrl+"reverse",u(this.options,{key:this.options.apiKey,coords:[e.lat,e.lng].join(",")})),s=[];if(t.status.status==200){const i=o.latLng(t.geometry.lat,t.geometry.lng),r=o.latLngBounds(i,i);s[0]={name:t.words,bbox:r,center:i}}return s}}function le(a){return new T(a)}const ce=Object.freeze(Object.defineProperty({__proto__:null,ArcGis:b,AzureMaps:w,Bing:L,GeocodeEarth:oe,Google:x,HERE:U,HEREv2:C,LatLng:E,MapQuest:D,Mapbox:k,Mapzen:ne,Neutrino:B,Nominatim:v,OpenCage:S,OpenLocationCode:K,Openrouteservice:O,Pelias:g,Photon:P,What3Words:T,arcgis:z,azure:J,bing:H,geocodeEarth:se,geocodingParams:h,google:V,here:$,latLng:F,mapQuest:X,mapbox:Q,mapzen:ie,neutrino:Y,nominatim:Z,openLocationCode:ee,opencage:te,openrouteservice:re,parseLatLng:R,pelias:f,photon:ae,reverseParams:u,what3words:le},Symbol.toStringTag,{value:"Module"}));class _{constructor(...e){}}o.Util.extend(_.prototype,o.Control.prototype);o.Util.extend(_.prototype,o.Evented.prototype);class y extends _{constructor(e){super(e),p(this,"options",{showUniqueResult:!0,showResultIcons:!1,collapsed:!0,expand:"touch",position:"topright",placeholder:"Search...",errorMessage:"Nothing found.",iconLabel:"Initiate a new search",query:"",queryMinLength:1,suggestMinLength:3,suggestTimeout:250,defaultMarkGeocode:!0}),p(this,"_alts"),p(this,"_container"),p(this,"_errorElement"),p(this,"_geocodeMarker"),p(this,"_input"),p(this,"_lastGeocode"),p(this,"_map"),p(this,"_preventBlurCollapse"),p(this,"_requestCount",0),p(this,"_results"),p(this,"_selection"),p(this,"_suggestTimeout"),o.Util.setOptions(this,e),this.options.geocoder||(this.options.geocoder=new v)}addThrobberClass(){o.DomUtil.addClass(this._container,"leaflet-control-geocoder-throbber")}removeThrobberClass(){o.DomUtil.removeClass(this._container,"leaflet-control-geocoder-throbber")}onAdd(e){var n;const t="leaflet-control-geocoder",s=o.DomUtil.create("div",t+" leaflet-bar"),i=o.DomUtil.create("button",t+"-icon",s),r=o.DomUtil.create("div",t+"-form",s);this._map=e,this._container=s,i.innerHTML="&nbsp;",i.type="button",i.setAttribute("aria-label",this.options.iconLabel);const l=this._input=o.DomUtil.create("input","",r);return l.type="search",l.value=this.options.query,l.placeholder=this.options.placeholder,o.DomEvent.disableClickPropagation(l),this._errorElement=o.DomUtil.create("div",t+"-form-no-error",s),this._errorElement.innerHTML=this.options.errorMessage,this._alts=o.DomUtil.create("ul",t+"-alternatives leaflet-control-geocoder-alternatives-minimized",s),o.DomEvent.disableClickPropagation(this._alts),o.DomEvent.addListener(l,"keydown",this._keydown,this),(n=this.options.geocoder)!=null&&n.suggest&&o.DomEvent.addListener(l,"input",this._change,this),o.DomEvent.addListener(l,"blur",()=>{this.options.collapsed&&!this._preventBlurCollapse&&this._collapse(),this._preventBlurCollapse=!1}),this.options.collapsed?this.options.expand==="click"?o.DomEvent.addListener(s,"click",c=>{c.button===0&&c.detail!==2&&this._toggle()}):this.options.expand==="touch"?o.DomEvent.addListener(s,o.Browser.touch?"touchstart mousedown":"mousedown",c=>{this._toggle(),c.preventDefault(),c.stopPropagation()},this):(o.DomEvent.addListener(s,"mouseover",this._expand,this),o.DomEvent.addListener(s,"mouseout",this._collapse,this),this._map.on("movestart",this._collapse,this)):(this._expand(),o.Browser.touch?o.DomEvent.addListener(s,"touchstart",()=>this._geocode()):o.DomEvent.addListener(s,"click",()=>this._geocode())),this.options.defaultMarkGeocode&&this.on("markgeocode",this.markGeocode,this),this.on("startgeocode",this.addThrobberClass,this),this.on("finishgeocode",this.removeThrobberClass,this),this.on("startsuggest",this.addThrobberClass,this),this.on("finishsuggest",this.removeThrobberClass,this),o.DomEvent.disableClickPropagation(s),s}setQuery(e){return this._input.value=e,this}_geocodeResult(e,n){if(!n&&this.options.showUniqueResult&&e.length===1)this._geocodeResultSelected(e[0]);else if(e.length>0){this._alts.innerHTML="",this._results=e,o.DomUtil.removeClass(this._alts,"leaflet-control-geocoder-alternatives-minimized"),o.DomUtil.addClass(this._container,"leaflet-control-geocoder-options-open");for(let t=0;t<e.length;t++)this._alts.appendChild(this._createAlt(e[t],t))}else o.DomUtil.addClass(this._container,"leaflet-control-geocoder-options-error"),o.DomUtil.addClass(this._errorElement,"leaflet-control-geocoder-error")}markGeocode(e){const n=e.geocode;return this._map.fitBounds(n.bbox),this._geocodeMarker&&this._map.removeLayer(this._geocodeMarker),this._geocodeMarker=new o.Marker(n.center).bindPopup(n.html||n.name).addTo(this._map).openPopup(),this}async _geocode(e=!1){const n=this._input.value;if(!e&&n.length<this.options.queryMinLength)return;const t=++this._requestCount;this._lastGeocode=n,e||this._clearResults();const s={input:n};this.fire(e?"startsuggest":"startgeocode",s);const i=e?await this.options.geocoder.suggest(n):await this.options.geocoder.geocode(n);if(t===this._requestCount){const r={input:n,results:i};this.fire(e?"finishsuggest":"finishgeocode",r),this._geocodeResult(i,e)}}_geocodeResultSelected(e){const n={geocode:e};this.fire("markgeocode",n)}_toggle(){o.DomUtil.hasClass(this._container,"leaflet-control-geocoder-expanded")?this._collapse():this._expand()}_expand(){o.DomUtil.addClass(this._container,"leaflet-control-geocoder-expanded"),this._input.select(),this.fire("expand")}_collapse(){o.DomUtil.removeClass(this._container,"leaflet-control-geocoder-expanded"),o.DomUtil.addClass(this._alts,"leaflet-control-geocoder-alternatives-minimized"),o.DomUtil.removeClass(this._errorElement,"leaflet-control-geocoder-error"),o.DomUtil.removeClass(this._container,"leaflet-control-geocoder-options-open"),o.DomUtil.removeClass(this._container,"leaflet-control-geocoder-options-error"),this._input.blur(),this.fire("collapse")}_clearResults(){o.DomUtil.addClass(this._alts,"leaflet-control-geocoder-alternatives-minimized"),this._selection=null,o.DomUtil.removeClass(this._errorElement,"leaflet-control-geocoder-error"),o.DomUtil.removeClass(this._container,"leaflet-control-geocoder-options-open"),o.DomUtil.removeClass(this._container,"leaflet-control-geocoder-options-error")}_createAlt(e,n){const t=o.DomUtil.create("li",""),s=o.DomUtil.create("a","",t),i=this.options.showResultIcons&&e.icon?o.DomUtil.create("img","",s):null,r=e.html?void 0:document.createTextNode(e.name),l=c=>{this._preventBlurCollapse=!0,o.DomEvent.stop(c),this._geocodeResultSelected(e),o.DomEvent.on(t,"click touchend",()=>{this.options.collapsed?this._collapse():this._clearResults()})};return i&&(i.src=e.icon),t.setAttribute("data-result-index",String(n)),e.html?s.innerHTML=s.innerHTML+e.html:r&&s.appendChild(r),o.DomEvent.addListener(t,"mousedown touchstart",l,this),t}_keydown(e){const n=t=>{this._selection&&(o.DomUtil.removeClass(this._selection,"leaflet-control-geocoder-selected"),this._selection=this._selection[t>0?"nextSibling":"previousSibling"]),this._selection||(this._selection=this._alts[t>0?"firstChild":"lastChild"]),this._selection&&o.DomUtil.addClass(this._selection,"leaflet-control-geocoder-selected")};switch(e.keyCode){case 27:this.options.collapsed?this._collapse():this._clearResults();break;case 38:n(-1);break;case 40:n(1);break;case 13:if(this._selection){const t=parseInt(this._selection.getAttribute("data-result-index"),10);this._geocodeResultSelected(this._results[t]),this._clearResults()}else this._geocode();break;default:return}o.DomEvent.preventDefault(e)}_change(){const e=this._input.value;e!==this._lastGeocode&&(clearTimeout(this._suggestTimeout),e.length>=this.options.suggestMinLength?this._suggestTimeout=setTimeout(()=>this._geocode(!0),this.options.suggestTimeout):this._clearResults())}}function pe(a){return new y(a)}/* @preserve
 * Leaflet Control Geocoder
 * https://github.com/perliedman/leaflet-control-geocoder
 *
 * Copyright (c) 2012 sa3m (https://github.com/sa3m)
 * Copyright (c) 2018 Per Liedman
 * All rights reserved.
 */o.Util.extend(y,ce);o.Util.extend(o.Control,{Geocoder:y,geocoder:pe});export{y as Geocoder,y as default,pe as geocoder,ce as geocoders};
