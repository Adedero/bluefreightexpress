const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./CznFVVkb.js","./m_FpzeNm.js"])))=>i.map(i=>d[i]);
import{e as C,i as v,A as P,B as T,C as w,c as g,o as y,a as t,p as k,u as n,d,t as c}from"./DHCjx-0A.js";/* empty css        */const V={ref:"map-el",class:"w-full rounded-md overflow-hidden",style:{height:"500px"}},E={key:0,class:"mt-4 p-4 bg-gray-50 border rounded shadow-sm relative"},S={key:0,class:"absolute inset-0 bg-white/80 flex items-center justify-center z-10"},h=["disabled"],N=C({__name:"location-picker",emits:["locationPicked"],setup(A,{emit:b}){const x=b,o=v(null),p=v(!1),i=v(null),f=P("map-el"),s=v(),L=()=>{i.value&&s.value&&(s.value.removeLayer(i.value),i.value=null),o.value=null};return T(async()=>{if(!f.value)return;const m=await w(()=>import("./m_FpzeNm.js").then(a=>a.l),[],import.meta.url),e=(await w(async()=>{const{default:a}=await import("./CznFVVkb.js");return{default:a}},__vite__mapDeps([0,1]),import.meta.url)).default;s.value=m.map(f.value).setView([0,0],5),m.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{maxZoom:18,attribution:"&copy; OpenStreetMap contributors"}).addTo(s.value);const _=async(a,r)=>{p.value=!0;try{const l=await $fetch("https://nominatim.openstreetmap.org/reverse",{params:{format:"jsonv2",lat:a,lon:r}}),u=l.address||{};o.value={lat:a,lng:r,name:l.name||"",address:l.display_name||"",country:u.country||"",countryCode:u.country_code||"",state:u.state||"",city:u.city||"",town:u.town||"",village:u.village||""},x("locationPicked",o.value),i.value&&s.value&&s.value.removeLayer(i.value),i.value=m.marker([a,r]).addTo(s.value).bindPopup(l.display_name||"Selected location").openPopup()}catch(l){console.error("Error during reverse geocoding",l)}finally{p.value=!1}};new e({defaultMarkGeocode:!0}).addTo(s.value).on("markgeocode",a=>{const{lat:r,lng:l}=a.geocode.center;s.value.setView([r,l],13),_(r,l)}),s.value.on("click",a=>{const{lat:r,lng:l}=a.latlng;_(r,l)})}),(m,e)=>(y(),g("div",null,[t("div",V,null,512),n(o)?(y(),g("div",E,[n(p)?(y(),g("div",S,e[0]||(e[0]=[t("span",{class:"text-sm text-gray-600 animate-pulse"},"Loading location...",-1)]))):k("",!0),t("p",null,[e[1]||(e[1]=t("strong",null,"Lat:",-1)),d(" "+c(n(o).lat),1)]),t("p",null,[e[2]||(e[2]=t("strong",null,"Lng:",-1)),d(" "+c(n(o).lng),1)]),t("p",null,[e[3]||(e[3]=t("strong",null,"Address:",-1)),d(" "+c(n(o).address),1)]),t("p",null,[e[4]||(e[4]=t("strong",null,"City:",-1)),d(" "+c(n(o).city||n(o).town||n(o).village),1)]),t("p",null,[e[5]||(e[5]=t("strong",null,"State:",-1)),d(" "+c(n(o).state),1)]),t("p",null,[e[6]||(e[6]=t("strong",null,"Country:",-1)),d(" "+c(n(o).country),1)]),t("button",{class:"mt-3 px-3 py-1 text-sm bg-red-500 text-white rounded hover:bg-red-600 transition",onClick:L,disabled:n(p)}," Clear Selection ",8,h)])):k("",!0)]))}});export{N as _};
