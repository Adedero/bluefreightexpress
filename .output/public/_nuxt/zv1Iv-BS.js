import N from"./BiOCAT8t.js";import{_ as C}from"./CJ4YIItw.js";import{_ as M}from"./DlWn3vbx.js";import{e as P,q as D,g as U,i as c,Y as z,c as u,o as p,Z as j,a as e,E as h,p as E,d as k,G as A,u as t,t as I,$ as F,b as i,n as L,w as $,_ as G}from"./C6vJagw2.js";import{z as _}from"./mSkvzYyn.js";import{u as H}from"./DkvVPrHr.js";import{_ as O}from"./DlAUqK2U.js";import{u as R}from"./DYnH12ZP.js";const Y=_.object({email:_.string({message:"Email is required"}).email({message:"Please, enter a valid email"}),password:_.string({message:"Password is required"})}),Z={class:"form-control"},J={key:0,class:"text-red-500 font-semibold"},K={class:"form-control"},Q={class:"relative"},W=["type"],X={key:0,class:"text-red-500 font-semibold"},ee={class:"mt-5"},te=P({__name:"form",setup(S){const f=D(),a=U(),s=c({}),n=c(!1),r=c(),l=c(!1),{fetch:T}=z(),V=async()=>{if(r.value=await Y.safeParseAsync(s.value),!!r.value.success){l.value=!0;try{await $fetch("/api/auth/login",{method:"POST",body:s.value}),await T();const{redirect:d}=f.query;if(d){await L(d);return}await L("/admin")}catch(d){H(d,a)}finally{l.value=!1}}};return(d,o)=>{var x,w,g,v,y,b;const B=N,q=M;return p(),u("form",{onSubmit:j(V,["prevent"]),id:"form",class:"grid gap-5 w-full md:w-96"},[e("div",Z,[o[3]||(o[3]=e("label",{for:"email"},[k("Email "),e("span",{class:"text-red-500"},"*")],-1)),h(e("input",{type:"email",id:"email","onUpdate:modelValue":o[0]||(o[0]=m=>t(s).email=m),class:"v-input"},null,512),[[A,t(s).email]]),(w=(x=t(r))==null?void 0:x.error)!=null&&w.formErrors.fieldErrors.email?(p(),u("small",J,I((g=t(r).error.formErrors.fieldErrors.email)==null?void 0:g[0]),1)):E("",!0)]),e("div",K,[o[4]||(o[4]=e("label",{for:"password"},[k("Password "),e("span",{class:"text-red-500"},"*")],-1)),e("div",Q,[h(e("input",{type:t(n)?"text":"password",id:"password","onUpdate:modelValue":o[1]||(o[1]=m=>t(s).password=m),class:"v-input pr-10"},null,8,W),[[F,t(s).password]]),e("button",{type:"button",class:"absolute top-1/2 right-3 -translate-y-1/2 text-slate-600 hover:text-primary-500 grid place-content-center",onClick:o[2]||(o[2]=m=>n.value=!t(n))},[i(B,{name:t(n)?"lucide:eye-off":"lucide:eye",size:"1.2rem"},null,8,["name"])])]),(y=(v=t(r))==null?void 0:v.error)!=null&&y.formErrors.fieldErrors.password?(p(),u("small",X,I((b=t(r).error.formErrors.fieldErrors.password)==null?void 0:b[0]),1)):E("",!0)]),e("div",ee,[i(q,{loading:t(l),type:"submit",text:"Log In",disabled:!t(s).email||!t(s).password,icon:"lucide:log-in",class:"w-full"},null,8,["loading","disabled"])])],32)}}}),se=O(te,[["__scopeId","data-v-799c3d27"]]),oe={class:"md:hidden fixed top-4 right-4"},re={class:"mt-10 w-[80vw] md:w-fit"},pe=P({__name:"index",setup(S){return R({title:"Log In"}),(f,a)=>{const s=N,n=C,r=se,l=G;return p(),u("div",null,[i(l,{name:"auth-default"},{default:$(()=>[e("div",null,[e("div",oe,[i(n,{to:"/",class:"flex items-center gap-2 text-xs font-semibold px-3 py-1 bg-primary-500/60 hover:bg-primary-500/70 transition-colors rounded-full text-white"},{default:$(()=>[a[0]||(a[0]=e("span",null,"Back to website",-1)),i(s,{name:"lucide:arrow-right"})]),_:1})]),a[1]||(a[1]=e("header",null,[e("h1",{class:"rubik font-bold text-4xl md:text-5xl"},"Log In"),e("p",{class:"text-sm mt-1"},"Log in with your admin credentials")],-1)),e("div",re,[i(r)])])]),_:1})])}}});export{pe as default};
